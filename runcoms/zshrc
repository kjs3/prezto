#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Homebrew completions
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH

  autoload -Uz compinit
  compinit
fi

# Open new tab in current directory
[[ -f /etc/profile.d/vte.sh ]] && . /etc/profile.d/vte.sh

# set terminal for i3
# export TERMINAL=kitty

# Add Rust path
. "$HOME/.cargo/env"

# Make VSCode trash work
export ELECTRON_TRASH=gio

# Golang setup
export GOPATH=$HOME/code/go
# export GOROOT=/usr/local/opt/go/libexec
export PATH=$PATH:$GOPATH/bin
export PATH=$PATH:$GOROOT/bin

# Add Homebrew Python symlinks
export PATH=/opt/homebrew/opt/python@3.10/libexec/bin:$PATH
# Add Python scripts to path
export PATH=$PATH:$HOME/.local/bin

# Prevent Next.js telemetry
export NEXT_TELEMETRY_DISABLED=1

# Pulse Secure:
alias pulseup=~/.local/pulse_up
alias pulsedown=~/.local/pulse_down

# pnpm
export PNPM_HOME="/Users/kjs3/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
alias p='pnpm'
# pnpm: Dependencies
alias pa='pnpm add'
alias pad='pnpm add --save-dev'
alias pap='pnpm add --save-peer'
alias prm='pnpm remove'
alias pin='pnpm install'
alias pls='pnpm list'
alias pu='pnpm update'
alias puil='pnpm update --interactive --latest'
# pnpm: Global dependencies
alias pga='pnpm add --global'
alias pgls='pnpm list --global'
alias pgrm='pnpm remove --global'
alias pgu='pnpm update --global'
# pnpm: Run scripts
alias prun='pnpm run'
alias pd='pnpm run dev'
alias pb='pnpm run build'
alias psv='pnpm run serve'
alias pst='pnpm start'
alias pt='pnpm test'
alias ptc='pnpm test --coverage'
alias pln='pnpm run lint'
alias pdocs='pnpm run docs'
alias pex='pnpm exec'
alias pdx='pnpm dlx'
# pnpm: Misc
alias pi='pnpm init'
alias ppub='pnpm publish'
alias pc='pnpm create'

# JS dev
alias turbo='pnpx turbo'
alias prisma='pnpm prisma'

# bun completions
[ -s "/Users/kjs3/.bun/_bun" ] && source "/Users/kjs3/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"
